@namespace
class SpriteKind:
    heroProjectile = SpriteKind.create()
    enemyProjectile = SpriteKind.create()
    specialProjectile = SpriteKind.create()

def on_on_created(sprite):
    global vyEnemy
    vyEnemy = -50
    sprite.set_position(140, randint(0, 115))
    sprite.set_velocity(0, vyEnemy)
    sprite.set_flag(SpriteFlag.BOUNCE_ON_WALL, True)
sprites.on_created(SpriteKind.enemy, on_on_created)

def on_on_overlap(sprite, otherSprite):
    music.power_down.play()
    sprite.destroy()
    info.change_life_by(-1)
    if info.life() == 0:
        game.over(False)
sprites.on_overlap(SpriteKind.enemyProjectile, SpriteKind.player, on_on_overlap)

def on_on_overlap2(sprite, otherSprite):
    sprite.destroy()
    info.change_life_by(-1)
    if info.life() <= 0:
        game.over(False)
sprites.on_overlap(SpriteKind.specialProjectile,
    SpriteKind.player,
    on_on_overlap2)

def on_on_overlap3(sprite, otherSprite):
    otherSprite.destroy()
sprites.on_overlap(SpriteKind.projectile,
    SpriteKind.specialProjectile,
    on_on_overlap3)

def on_a_pressed():
    global starAmmo
    starAmmo = sprites.create_projectile_from_sprite(img("""
            . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . 1 . . . . . 1 . . . . . . 
                    . . 1 1 1 . . . 1 1 1 . . . . . 
                    . . . 1 . . 1 . . 1 . . . . . . 
                    . . . . . 1 1 1 . . . . . . . . 
                    . . . 1 . . 1 . . 1 . . . . . . 
                    . . 1 1 1 . . . 1 1 1 . . . . . 
                    . . . 1 . . . . . 1 . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . .
        """),
        mySprite,
        50,
        0)
    music.pew_pew.play()
    starAmmo.set_kind(SpriteKind.projectile)
controller.A.on_event(ControllerButtonEvent.PRESSED, on_a_pressed)

def on_on_overlap4(sprite, otherSprite):
    sprite.destroy()
sprites.on_overlap(SpriteKind.heroProjectile,
    SpriteKind.enemyProjectile,
    on_on_overlap4)

def on_on_overlap5(sprite, otherSprite):
    global vyEnemy, msTimer, bSpecialAmmo
    music.power_up.play()
    sprite.destroy()
    info.change_score_by(1)
    if info.score() % 20 == 0:
        info.change_life_by(1)
        vyEnemy += -10
        msTimer += -100
    if info.score() >= 80:
        bSpecialAmmo = 1
sprites.on_overlap(SpriteKind.heroProjectile, SpriteKind.player, on_on_overlap5)

def on_on_created2(sprite):
    sprite.set_flag(SpriteFlag.STAY_IN_SCREEN, True)
sprites.on_created(SpriteKind.player, on_on_created2)

def on_on_overlap6(sprite, otherSprite):
    fireAmmo.set_image(img("""
        . . . . . . . . . . . . . . . . 
                . . . 1 1 1 1 1 1 1 . . . . . . 
                . . 1 c a a a a a 9 1 . . . . . 
                . . 1 c c a a a 9 9 1 . . . . . 
                . . 1 c a a 1 a a 9 1 . . . . . 
                . . 1 a a 1 1 1 a a 1 . . . . . 
                . . 1 c a a 1 a a 9 1 . . . . . 
                . . 1 c c a a a 9 9 1 . . . . . 
                . . 1 c a a a a a 9 1 . . . . . 
                . . . 1 1 1 1 1 1 1 . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . .
    """))
    fireAmmo.set_kind(SpriteKind.heroProjectile)
sprites.on_overlap(SpriteKind.projectile, SpriteKind.enemy, on_on_overlap6)

def on_on_overlap7(sprite, otherSprite):
    otherSprite.destroy()
sprites.on_overlap(SpriteKind.specialProjectile,
    SpriteKind.heroProjectile,
    on_on_overlap7)

missleAmmo: Sprite = None
fireAmmo: Sprite = None
bSpecialAmmo = 0
starAmmo: Sprite = None
vyEnemy = 0
mySprite: Sprite = None
msTimer = 1000
info.set_life(3)
scene.set_background_image(img("""
    ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ...........................................................................222..................................................................................
        ........................................................................222..22.................................................................................
        ......................................................................22......2.................................................................................
        .....................................................................2........2.................................................................................
        ...................................................................22..........2................................................................................
        .................................................................22............2................................................................................
        ...............................................................22...............2...............................................................................
        ..............................................................22................2...............................................................................
        .............................................................2...................2..............................................................................
        ............................................................2....................2..............................................................................
        ...........................................................2......................2.............................................................................
        ..........................................................2........................2............................................................................
        ....................................................................................2...........................................................................
        ........................................................2...........................2...........................................................................
        ........................................................2...........................2...........................................................................
        .......................................................2.............................2..........................................................................
        ......................................................2..............................2..........................................................................
        .....................................................2...............................2..........................................................................
        ....................................................2.................................2.........................................................................
        ...................................................2...................................2........................................................................
        ..................................................22...................................2........................................................................
        ..................................................2.....................................2.......................................................................
        .................................................2......................................2.......................................................................
        ................................................22.......................................2......................................................................
        ...............................................22........................................2......................................................................
        ...............................................2..........................................2.....................................................................
        ..............................................2............................................2....................................................................
        .............................................2.............................................2....................................................................
        .............................................2..............................................2...................................................................
        ............................................2................................................2..................................................................
        ...........................................2..................................................2.................................................................
        ..........................................2....................................................2................................................................
        ..........................................2.....................................................2...............................................................
        .........................................2.......................................................2..............................................................
        .........................................2........................................................2.............................................................
        ........................................2..........................................................2............................................................
        .......................................2............................................................22..........................................................
        ......................................2..............................................................2..........................................................
        ......................................2..............................................................22.........................................................
        .....................................2.................................................................2........................................................
        .....................................2.................................................................2........................................................
        ....................................2...................................................................2.......................................................
        ...................................2.....................................................................2......................................................
        ..................................2.......................................................................2.....................................................
        ..................................2........................................................................2....................................................
        ..................................2.........................................................................2...................................................
        .................................2..........................................................................2...................................................
        ................................2............................................................................2..................................................
        ................................2.............................................................................2.................................................
        ................................2..............................................................................2................................................
        ...............................2................................................................................22..............................................
        ..............................2...................................................................................2.............................................
        .............................2....................................................................................2.............................................
        ............................2......................................................................................2............................................
        ............................2......................................................................................2............................................
        ............................2.......................................................................................2...........................................
        ...........................2........................................................................................2...........................................
        ..........................2..........................................................................................2..........................................
        .........................22...........................................................................................2.........................................
        ........................2..............................................................................................2........................................
        ........................2..............................................................................................2........................................
        ........................2...............................................................................................2.......................................
        .......................2.................................................................................................2......................................
        ......................2...................................................................................................2.....................................
        ......................2....................................................................................................2....................................
        .....................2.....................................................................................................2....................................
        ....................2.......................................................................................................2...................................
        ...................2.........................................................................................................2..................................
        ...................2..........................................................................................................2.................................
        ...................2..........................................................................................................22................................
        ..................2............................................................................................................2................................
        ..................2............................................................................................................2................................
        .................22............................................................................................................22...............................
        .................2..............................................................................................................22..............................
        ................2................................................................................................................22.............................
        ................2.................................................................................................................2.............................
        ................2.................................................................................................................2.............................
        ................2.................................................................................................................2.............................
        ................2.................................................................................................................22............................
        ................................................................................................................................................................
"""))
mySprite = sprites.create(img("""
        ....ffffff..............
            ..ffeeeef2f.............
            .ffeeeef222f............
            .feeeffeeeef............
            .ffffee2222ef...........
            .fe222ffffe2f...........
            fffffffeeefff...........
            ffe44ebf44eef...........
            fee4d41fddef............
            .feee4ddddf.............
            ..fdde444ef.............
            ..fdde22ccc.............
            ...eef22cdc.............
            ...f4444cddc............
            ....fffffcddc...........
            .....fff..cddc..........
            ...........cdc..........
            ............cc..........
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
    """),
    SpriteKind.player)
enemySprite = sprites.create(img("""
        . . . . . c c c c c c c . . . . 
            . . . . c 6 7 7 7 7 7 6 c . . . 
            . . . c 7 c 6 6 6 6 c 7 6 c . . 
            . . c 6 7 6 f 6 6 f 6 7 7 c . . 
            . . c 7 7 7 7 7 7 7 7 7 7 c . . 
            . . f 7 8 1 f f 1 6 7 7 7 f . . 
            . . f 6 f 1 f f 1 f 7 7 7 f . . 
            . . . f f 2 2 2 2 f 7 7 6 f . . 
            . . c c f 2 2 2 2 7 7 6 f c . . 
            . c 7 7 7 7 7 7 7 7 c c 7 7 c . 
            c 7 1 1 1 7 7 7 7 f c 6 7 7 7 c 
            f 1 1 1 1 1 7 6 f c c 6 6 6 c c 
            f 1 1 1 1 1 1 6 6 c 6 6 6 c . . 
            f 6 1 1 1 1 1 6 6 6 6 6 6 c . . 
            . f 6 1 1 1 1 1 6 6 6 6 c . . . 
            . . f f c c c c c c c c . . . .
    """),
    SpriteKind.enemy)
controller.move_sprite(mySprite)

def on_update_interval():
    global fireAmmo, missleAmmo
    fireAmmo = sprites.create_projectile_from_sprite(img("""
            . . . . . . . . . . . . . . . . 
                    . . . 4 4 4 4 4 4 4 . . . . . . 
                    . . 4 8 2 2 2 2 2 5 4 . . . . . 
                    . . 4 8 8 2 2 2 5 5 4 . . . . . 
                    . . 4 8 2 2 4 2 2 5 4 . . . . . 
                    . . 4 2 2 4 4 4 2 2 4 . . . . . 
                    . . 4 8 2 2 4 2 2 5 4 . . . . . 
                    . . 4 8 8 2 2 2 5 5 4 . . . . . 
                    . . 4 8 2 2 2 2 2 5 4 . . . . . 
                    . . . 4 4 4 4 4 4 4 . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . .
        """),
        enemySprite,
        randint(-100, -5),
        0)
    fireAmmo.set_kind(SpriteKind.enemyProjectile)
    if bSpecialAmmo:
        missleAmmo = sprites.create_projectile_from_sprite(img("""
                . . . . . . . . . . . . . . . . 
                            . . . . . . 4 4 4 4 . . . . . . 
                            . . . . 4 4 4 5 5 4 4 4 . . . . 
                            . . . 3 3 3 3 4 4 4 4 4 4 . . . 
                            . . 4 3 3 3 3 2 2 2 1 1 4 4 . . 
                            . . 3 3 3 3 3 2 2 2 1 1 5 4 . . 
                            . 4 3 3 3 3 2 2 2 2 2 5 5 4 4 . 
                            . 4 3 3 3 2 2 2 4 4 4 4 5 4 4 . 
                            . 4 4 3 3 2 2 4 4 4 4 4 4 4 4 . 
                            . 4 2 3 3 2 2 4 4 4 4 4 4 4 4 . 
                            . . 4 2 3 3 2 4 4 4 4 4 2 4 . . 
                            . . 4 2 2 3 2 2 4 4 4 2 4 4 . . 
                            . . . 4 2 2 2 2 2 2 2 2 4 . . . 
                            . . . . 4 4 2 2 2 2 4 4 . . . . 
                            . . . . . . 4 4 4 4 . . . . . . 
                            . . . . . . . . . . . . . . . .
            """),
            enemySprite,
            randint(-100, -5),
            0)
        missleAmmo.set_kind(SpriteKind.specialProjectile)
        missleAmmo.follow(mySprite)
game.on_update_interval(msTimer, on_update_interval)
